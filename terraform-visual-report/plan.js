window.TF_PLAN = {"format_version":"0.1","terraform_version":"0.14.7","variables":{"ami":{"value":{"ap-south-1":"ami-059d1007dcf297b22","default":"ami-0dd76f917833aac4b","us-east-1":"ami-0dd76f917833aac4b","us-east-2":"ami-02de934ca4f3289e0"}},"ec2_user":{"value":"ubuntu"},"environment_to_profile_map":{"value":{"default":"dev","dev":"dev","prod":"aws-prod-profile","qa":"aws-qa-profile","staging":"aws-staging-profile"}},"environment_to_region_map":{"value":{"default":"us-east-1","dev":"us-east-1","prod":"ap-south-1","qa":"us-east-2","staging":"us-west-1"}},"instance_count":{"value":{"default":"2","dev":"2","prod":"6","qa":"3","staging":"4"}},"instance_type":{"value":{"default":"t3.large","dev":"t3.large","prod":"c5d.4xlarge","qa":"t3.large","staging":"c5d.4xlarge"}},"private_key_path":{"value":"/Users/abhishek.sh/personal-proj/cockroachdb-on-aws/scripts/ssh/cockroachdb-node"},"private_subnet_map_1":{"value":{"default":"10.18.8.0/22","dev":"10.18.8.0/22","prod":"10.20.8.0/22","staging":"10.19.8.0/22"}},"private_subnet_map_2":{"value":{"default":"10.18.12.0/22","dev":"10.18.12.0/22","prod":"10.20.12.0/22","staging":"10.19.12.0/22"}},"public_key_path":{"value":"/Users/abhishek.sh/personal-proj/cockroachdb-on-aws/scripts/ssh/cockroachdb-node.pub"},"public_subnet_map":{"value":{"default":"10.18.0.0/22","dev":"10.18.0.0/22","prod":"10.20.0.0/22","staging":"10.19.0.0/22"}},"vpc_cidr_map":{"value":{"default":"10.18.0.0/16","dev":"10.18.0.0/16","prod":"10.20.0.0/16","staging":"10.19.0.0/16"}},"workspace_to_environment_map":{"value":{"default":"dev","dev":"dev","prod":"prod","qa":"qa","staging":"staging"}}},"planned_values":{"outputs":{"availability_zone":{"sensitive":false},"bastion_public_ip":{"sensitive":false},"id":{"sensitive":false},"instance_state":{"sensitive":false},"key_name":{"sensitive":false},"lb_dns_name":{"sensitive":false},"private_ip":{"sensitive":false},"security_groups":{"sensitive":false},"vpc-id":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.create_cockroachdb_environment.aws_alb_listener.cockroachdb_service_listener","mode":"managed","type":"aws_alb_listener","name":"cockroachdb_service_listener","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":26257,"protocol":"TCP","tags":null,"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_eip.bastion_eip","mode":"managed","type":"aws_eip","name":"bastion_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"Bastion Elastic IP"},"tags_all":{"Name":"Bastion Elastic IP"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_eip.test-nat","mode":"managed","type":"aws_eip","name":"test-nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"test-nat"},"tags_all":{"Name":"test-nat"},"timeouts":null,"vpc":true}},{"address":"module.create_cockroachdb_environment.aws_instance.bastion_instance","mode":"managed","type":"aws_instance","name":"bastion_instance","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.micro","monitoring":null,"source_dest_check":true,"tags":{"Creator":"Terraform","Environment":"terraform.workspace","Name":"dev bastion instance"},"tags_all":{"Creator":"Terraform","Environment":"terraform.workspace","Name":"dev bastion instance"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null}},{"address":"module.create_cockroachdb_environment.aws_instance.cockroachdb-node[0]","mode":"managed","type":"aws_instance","name":"cockroachdb-node","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.large","monitoring":null,"source_dest_check":true,"tags":{"Name":"Terraform-1"},"tags_all":{"Name":"Terraform-1"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null}},{"address":"module.create_cockroachdb_environment.aws_instance.cockroachdb-node[1]","mode":"managed","type":"aws_instance","name":"cockroachdb-node","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.large","monitoring":null,"source_dest_check":true,"tags":{"Name":"Terraform-2"},"tags_all":{"Name":"Terraform-2"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null}},{"address":"module.create_cockroachdb_environment.aws_internet_gateway.test-igw","mode":"managed","type":"aws_internet_gateway","name":"test-igw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"test-igw"},"tags_all":{"Name":"test-igw"}}},{"address":"module.create_cockroachdb_environment.aws_key_pair.cockroachdb-key-pair","mode":"managed","type":"aws_key_pair","name":"cockroachdb-key-pair","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"key_name":"cockroachdb-key-pair","key_name_prefix":null,"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6SQn9HzEI/zE9hcWfYLzzNkL+3WzJwc/gNW+kd766XgMFVILiRqfi28Wv4fdsjvIet49P2foBJ1AVRVtPQn5kLQGjB6JQC+A9V0XWwdZK2PzziN+oZ0lpDJfv8GUVzR01aYaw3BFGYz0YPQch11xDhGuKY7oc3SFAgAnrlYMkWQd0teDB6Q8NEttIniBcoWhdT/l8Llneqt9IeNYjUN2O/kvLcNLb28y8QsIPyNbJJhToXKJm/TcjRtcAWGJlMmT6MphZvlwMo5+Ll5rHSAG7l6TRoX6TXw2XvOtsmugRgn+l+vaOUp7h8/bAt6gyMOnnhiNLjsLm3K3iPEfyKr+1 abhishek.sh@BBMDVABHISHEKSH.local","tags":null}},{"address":"module.create_cockroachdb_environment.aws_lb.test_alb","mode":"managed","type":"aws_lb","name":"test_alb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":false,"enable_deletion_protection":false,"enable_http2":null,"idle_timeout":null,"internal":true,"load_balancer_type":"network","name":"dev-cockroachdb-lb","name_prefix":null,"tags":{"Name":"dev-cockroachdb-lb"},"tags_all":{"Name":"dev-cockroachdb-lb"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group.cockroachdb_service_tg","mode":"managed","type":"aws_lb_target_group","name":"cockroachdb_service_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"path":"/health?ready=1","port":"8080","protocol":"HTTP","unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"dev-cockroachdb-service-tg","name_prefix":null,"port":26257,"protocol":"TCP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance"}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group_attachment.cockroachdb_service_tg_attachment[0]","mode":"managed","type":"aws_lb_target_group_attachment","name":"cockroachdb_service_tg_attachment","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":26257}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group_attachment.cockroachdb_service_tg_attachment[1]","mode":"managed","type":"aws_lb_target_group_attachment","name":"cockroachdb_service_tg_attachment","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":26257}},{"address":"module.create_cockroachdb_environment.aws_nat_gateway.test-ngw","mode":"managed","type":"aws_nat_gateway","name":"test-ngw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","tags":{"Name":"test-ngw"},"tags_all":{"Name":"test-ngw"}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_igw_rt","mode":"managed","type":"aws_route_table","name":"test_igw_rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"est_igw_rt"},"tags_all":{"Name":"est_igw_rt"}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_nat_rt_1","mode":"managed","type":"aws_route_table","name":"test_nat_rt_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"test_nat_rt_1"},"tags_all":{"Name":"test_nat_rt_1"}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_nat_rt_2","mode":"managed","type":"aws_route_table","name":"test_nat_rt_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"test_nat_rt_2"},"tags_all":{"Name":"test_nat_rt_2"}}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_private_1","mode":"managed","type":"aws_route_table_association","name":"test_private_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_private_2","mode":"managed","type":"aws_route_table_association","name":"test_private_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_public","mode":"managed","type":"aws_route_table_association","name":"test_public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null}},{"address":"module.create_cockroachdb_environment.aws_security_group.bastion_sg","mode":"managed","type":"aws_security_group","name":"bastion_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8008,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"dev Bastion Security Group","revoke_rules_on_delete":false,"tags":null,"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_security_group.cockroachdb-allowed","mode":"managed","type":"aws_security_group","name":"cockroachdb-allowed","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":26257,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":26257},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"dev cockroachdb Security Group","revoke_rules_on_delete":false,"tags":{"Name":"cockroachdb-allowed"},"tags_all":{"Name":"cockroachdb-allowed"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_private_subnet_1","mode":"managed","type":"aws_subnet","name":"test_private_subnet_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.18.8.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_private_subnet_1"},"tags_all":{"Name":"test_private_subnet_1"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_private_subnet_2","mode":"managed","type":"aws_subnet","name":"test_private_subnet_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.18.12.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_private_subnet_2"},"tags_all":{"Name":"test_private_subnet_2"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_public_subnet","mode":"managed","type":"aws_subnet","name":"test_public_subnet","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.18.0.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_public_subnet"},"tags_all":{"Name":"test_public_subnet"},"timeouts":null}},{"address":"module.create_cockroachdb_environment.aws_vpc.test-vpc","mode":"managed","type":"aws_vpc","name":"test-vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.18.0.0/16","enable_classiclink":false,"enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"test-vpc"},"tags_all":{"Name":"test-vpc"}}},{"address":"module.create_cockroachdb_environment.null_resource.bastion-runner","mode":"managed","type":"null_resource","name":"bastion-runner","provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":null}},{"address":"module.create_cockroachdb_environment.null_resource.cockroach-runner[0]","mode":"managed","type":"null_resource","name":"cockroach-runner","index":0,"provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":null}},{"address":"module.create_cockroachdb_environment.null_resource.cockroach-runner[1]","mode":"managed","type":"null_resource","name":"cockroach-runner","index":1,"provider_name":"registry.terraform.io/hashicorp/null","schema_version":0,"values":{"triggers":null}}],"address":"module.create_cockroachdb_environment"}]}},"resource_changes":[{"address":"module.create_cockroachdb_environment.aws_alb_listener.cockroachdb_service_listener","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_alb_listener","name":"cockroachdb_service_listener","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":26257,"protocol":"TCP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"ssl_policy":true,"tags_all":true}}},{"address":"module.create_cockroachdb_environment.aws_eip.bastion_eip","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_eip","name":"bastion_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"Bastion Elastic IP"},"tags_all":{"Name":"Bastion Elastic IP"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true}}},{"address":"module.create_cockroachdb_environment.aws_eip.test-nat","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_eip","name":"test-nat","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"test-nat"},"tags_all":{"Name":"test-nat"},"timeouts":null,"vpc":true},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{}}}},{"address":"module.create_cockroachdb_environment.aws_instance.bastion_instance","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_instance","name":"bastion_instance","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.micro","monitoring":null,"source_dest_check":true,"tags":{"Creator":"Terraform","Environment":"terraform.workspace","Name":"dev bastion instance"},"tags_all":{"Creator":"Terraform","Environment":"terraform.workspace","Name":"dev bastion instance"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"vpc_security_group_ids":true}}},{"address":"module.create_cockroachdb_environment.aws_instance.cockroachdb-node[0]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_instance","name":"cockroachdb-node","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.large","monitoring":null,"source_dest_check":true,"tags":{"Name":"Terraform-1"},"tags_all":{"Name":"Terraform-1"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"vpc_security_group_ids":true}}},{"address":"module.create_cockroachdb_environment.aws_instance.cockroachdb-node[1]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_instance","name":"cockroachdb-node","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0dd76f917833aac4b","credit_specification":[],"disable_api_termination":null,"ebs_optimized":null,"get_password_data":false,"hibernation":null,"iam_instance_profile":null,"instance_type":"t3.large","monitoring":null,"source_dest_check":true,"tags":{"Name":"Terraform-2"},"tags_all":{"Name":"Terraform-2"},"timeouts":null,"user_data":null,"user_data_base64":null,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"ebs_block_device":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"metadata_options":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"primary_network_interface_id":true,"private_dns":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":true,"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"vpc_security_group_ids":true}}},{"address":"module.create_cockroachdb_environment.aws_internet_gateway.test-igw","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_internet_gateway","name":"test-igw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"test-igw"},"tags_all":{"Name":"test-igw"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_key_pair.cockroachdb-key-pair","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_key_pair","name":"cockroachdb-key-pair","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"key_name":"cockroachdb-key-pair","key_name_prefix":null,"public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6SQn9HzEI/zE9hcWfYLzzNkL+3WzJwc/gNW+kd766XgMFVILiRqfi28Wv4fdsjvIet49P2foBJ1AVRVtPQn5kLQGjB6JQC+A9V0XWwdZK2PzziN+oZ0lpDJfv8GUVzR01aYaw3BFGYz0YPQch11xDhGuKY7oc3SFAgAnrlYMkWQd0teDB6Q8NEttIniBcoWhdT/l8Llneqt9IeNYjUN2O/kvLcNLb28y8QsIPyNbJJhToXKJm/TcjRtcAWGJlMmT6MphZvlwMo5+Ll5rHSAG7l6TRoX6TXw2XvOtsmugRgn+l+vaOUp7h8/bAt6gyMOnnhiNLjsLm3K3iPEfyKr+1 abhishek.sh@BBMDVABHISHEKSH.local","tags":null},"after_unknown":{"arn":true,"fingerprint":true,"id":true,"key_pair_id":true,"tags_all":true}}},{"address":"module.create_cockroachdb_environment.aws_lb.test_alb","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_lb","name":"test_alb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"customer_owned_ipv4_pool":null,"drop_invalid_header_fields":null,"enable_cross_zone_load_balancing":false,"enable_deletion_protection":false,"enable_http2":null,"idle_timeout":null,"internal":true,"load_balancer_type":"network","name":"dev-cockroachdb-lb","name_prefix":null,"tags":{"Name":"dev-cockroachdb-lb"},"tags_all":{"Name":"dev-cockroachdb-lb"},"timeouts":null},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"dns_name":true,"id":true,"ip_address_type":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true}}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group.cockroachdb_service_tg","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_lb_target_group","name":"cockroachdb_service_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"path":"/health?ready=1","port":"8080","protocol":"HTTP","unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"dev-cockroachdb-service-tg","name_prefix":null,"port":26257,"protocol":"TCP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance"},"after_unknown":{"arn":true,"arn_suffix":true,"health_check":[{"matcher":true,"timeout":true}],"id":true,"load_balancing_algorithm_type":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group_attachment.cockroachdb_service_tg_attachment[0]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_lb_target_group_attachment","name":"cockroachdb_service_tg_attachment","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":26257},"after_unknown":{"id":true,"target_group_arn":true,"target_id":true}}},{"address":"module.create_cockroachdb_environment.aws_lb_target_group_attachment.cockroachdb_service_tg_attachment[1]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_lb_target_group_attachment","name":"cockroachdb_service_tg_attachment","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":26257},"after_unknown":{"id":true,"target_group_arn":true,"target_id":true}}},{"address":"module.create_cockroachdb_environment.aws_nat_gateway.test-ngw","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_nat_gateway","name":"test-ngw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","tags":{"Name":"test-ngw"},"tags_all":{"Name":"test-ngw"}},"after_unknown":{"allocation_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"subnet_id":true,"tags":{},"tags_all":{}}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_igw_rt","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table","name":"test_igw_rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"est_igw_rt"},"tags_all":{"Name":"est_igw_rt"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_nat_rt_1","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table","name":"test_nat_rt_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"test_nat_rt_1"},"tags_all":{"Name":"test_nat_rt_1"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_route_table.test_nat_rt_2","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table","name":"test_nat_rt_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","instance_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"test_nat_rt_2"},"tags_all":{"Name":"test_nat_rt_2"}},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_private_1","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table_association","name":"test_private_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true}}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_private_2","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table_association","name":"test_private_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true}}},{"address":"module.create_cockroachdb_environment.aws_route_table_association.test_public","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_route_table_association","name":"test_public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true}}},{"address":"module.create_cockroachdb_environment.aws_security_group.bastion_sg","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_security_group","name":"bastion_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8008,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"dev Bastion Security Group","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_security_group.cockroachdb-allowed","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_security_group","name":"cockroachdb-allowed","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":26257,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":26257},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":8080,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":8080}],"name":"dev cockroachdb Security Group","revoke_rules_on_delete":false,"tags":{"Name":"cockroachdb-allowed"},"tags_all":{"Name":"cockroachdb-allowed"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_private_subnet_1","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_subnet","name":"test_private_subnet_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.18.8.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_private_subnet_1"},"tags_all":{"Name":"test_private_subnet_1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_private_subnet_2","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_subnet","name":"test_private_subnet_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.18.12.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_private_subnet_2"},"tags_all":{"Name":"test_private_subnet_2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_subnet.test_public_subnet","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_subnet","name":"test_public_subnet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.18.0.0/22","customer_owned_ipv4_pool":null,"ipv6_cidr_block":null,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"test_public_subnet"},"tags_all":{"Name":"test_public_subnet"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true}}},{"address":"module.create_cockroachdb_environment.aws_vpc.test-vpc","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"aws_vpc","name":"test-vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":false,"cidr_block":"10.18.0.0/16","enable_classiclink":false,"enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","tags":{"Name":"test-vpc"},"tags_all":{"Name":"test-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}}}},{"address":"module.create_cockroachdb_environment.null_resource.bastion-runner","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"null_resource","name":"bastion-runner","provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"id":true}}},{"address":"module.create_cockroachdb_environment.null_resource.cockroach-runner[0]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"null_resource","name":"cockroach-runner","index":0,"provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"id":true}}},{"address":"module.create_cockroachdb_environment.null_resource.cockroach-runner[1]","module_address":"module.create_cockroachdb_environment","mode":"managed","type":"null_resource","name":"cockroach-runner","index":1,"provider_name":"registry.terraform.io/hashicorp/null","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"id":true}}}],"output_changes":{"availability_zone":{"actions":["create"],"before":null,"after_unknown":true},"bastion_public_ip":{"actions":["create"],"before":null,"after_unknown":true},"id":{"actions":["create"],"before":null,"after_unknown":true},"instance_state":{"actions":["create"],"before":null,"after_unknown":true},"key_name":{"actions":["create"],"before":null,"after_unknown":true},"lb_dns_name":{"actions":["create"],"before":null,"after_unknown":true},"private_ip":{"actions":["create"],"before":null,"after_unknown":true},"security_groups":{"actions":["create"],"before":null,"after_unknown":true},"vpc-id":{"actions":["create"],"before":null,"after_unknown":true}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"profile":{"references":["var.environment_to_profile_map","terraform.workspace"]},"region":{"references":["var.environment_to_region_map","terraform.workspace"]}}}},"root_module":{"outputs":{"availability_zone":{"expression":{"references":["module.create_cockroachdb_environment.availability_zone"]},"description":"List of availability zones of instances"},"bastion_public_ip":{"expression":{"references":["module.create_cockroachdb_environment.bastion_public_ip"]},"description":"List of public IP addresses assigned to the instances, if applicable"},"id":{"expression":{"references":["module.create_cockroachdb_environment.id"]},"description":"List of IDs of instances"},"instance_state":{"expression":{"references":["module.create_cockroachdb_environment.instance_state"]},"description":"List of instance states of instances"},"key_name":{"expression":{"references":["module.create_cockroachdb_environment.key_name"]},"description":"List of key names of instances"},"lb_dns_name":{"expression":{"references":["module.create_cockroachdb_environment.lb_dns_name"]},"description":"The DNS name of the load balancer."},"private_ip":{"expression":{"references":["module.create_cockroachdb_environment.private_ip"]},"description":"List of private IP addresses assigned to the instances"},"security_groups":{"expression":{"references":["module.create_cockroachdb_environment.security_groups"]},"description":"List of associated security groups of instances"},"vpc-id":{"expression":{"references":["module.create_cockroachdb_environment.vpc-id"]}}},"module_calls":{"create_cockroachdb_environment":{"source":"git::https://github.com/sharmajee1/cockroachdb-on-aws.git//terraform-modules/computing","expressions":{"ami":{"references":["var.ami","local.region"]},"ec2_user":{"references":["var.ec2_user"]},"instance_count":{"references":["var.instance_count","terraform.workspace"]},"instance_type":{"references":["var.instance_type","terraform.workspace"]},"private_key_path":{"references":["var.private_key_path"]},"private_subnet_map_1":{"references":["var.private_subnet_map_1","terraform.workspace"]},"private_subnet_map_2":{"references":["var.private_subnet_map_2","terraform.workspace"]},"public_key_path":{"references":["var.public_key_path"]},"public_subnet_map":{"references":["var.public_subnet_map","terraform.workspace"]},"region":{"references":["var.environment_to_region_map","terraform.workspace"]},"vpc_cidr_map":{"references":["var.vpc_cidr_map","terraform.workspace"]}},"module":{"outputs":{"availability_zone":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of availability zones of instances"},"bastion_public_ip":{"expression":{"references":["aws_instance.bastion_instance"]},"description":"List of public IP addresses assigned to the instances, if applicable"},"id":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of IDs of instances"},"instance_state":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of instance states of instances"},"key_name":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of key names of instances"},"lb_dns_name":{"expression":{"references":["aws_lb.test_alb"]},"description":"The DNS name of the load balancer."},"private_ip":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of private IP addresses assigned to the instances"},"security_groups":{"expression":{"references":["aws_instance.cockroachdb-node"]},"description":"List of associated security groups of instances"},"vpc-id":{"expression":{"references":["aws_vpc.test-vpc"]}}},"resources":[{"address":"aws_alb_listener.cockroachdb_service_listener","mode":"managed","type":"aws_alb_listener","name":"cockroachdb_service_listener","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.cockroachdb_service_tg"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.test_alb"]},"port":{"constant_value":"26257"},"protocol":{"constant_value":"TCP"}},"schema_version":0},{"address":"aws_eip.bastion_eip","mode":"managed","type":"aws_eip","name":"bastion_eip","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"instance":{"references":["aws_instance.bastion_instance"]},"tags":{"constant_value":{"Name":"Bastion Elastic IP"}}},"schema_version":0},{"address":"aws_eip.test-nat","mode":"managed","type":"aws_eip","name":"test-nat","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"tags":{"constant_value":{"Name":"test-nat"}},"vpc":{"constant_value":true}},"schema_version":0},{"address":"aws_instance.bastion_instance","mode":"managed","type":"aws_instance","name":"bastion_instance","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"constant_value":"t3.micro"},"key_name":{"references":["aws_key_pair.cockroachdb-key-pair"]},"subnet_id":{"references":["aws_subnet.test_public_subnet"]},"tags":{"references":["terraform.workspace"]},"vpc_security_group_ids":{"references":["aws_security_group.bastion_sg"]}},"schema_version":1},{"address":"aws_instance.cockroachdb-node","mode":"managed","type":"aws_instance","name":"cockroachdb-node","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"ami":{"references":["var.ami"]},"instance_type":{"references":["var.instance_type"]},"key_name":{"references":["aws_key_pair.cockroachdb-key-pair"]},"subnet_id":{"references":["aws_subnet.test_private_subnet_1"]},"tags":{"references":["count.index"]},"vpc_security_group_ids":{"references":["aws_security_group.cockroachdb-allowed"]}},"schema_version":1,"count_expression":{"references":["var.instance_count"]}},{"address":"aws_internet_gateway.test-igw","mode":"managed","type":"aws_internet_gateway","name":"test-igw","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"tags":{"constant_value":{"Name":"test-igw"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":0},{"address":"aws_key_pair.cockroachdb-key-pair","mode":"managed","type":"aws_key_pair","name":"cockroachdb-key-pair","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"key_name":{"constant_value":"cockroachdb-key-pair"},"public_key":{"references":["var.public_key_path"]}},"schema_version":1},{"address":"aws_lb.test_alb","mode":"managed","type":"aws_lb","name":"test_alb","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"enable_deletion_protection":{"constant_value":false},"internal":{"constant_value":true},"load_balancer_type":{"constant_value":"network"},"name":{"references":["terraform.workspace"]},"subnets":{"references":["aws_subnet.test_private_subnet_1","aws_subnet.test_private_subnet_2"]},"tags":{"references":["terraform.workspace"]}},"schema_version":0},{"address":"aws_lb_target_group.cockroachdb_service_tg","mode":"managed","type":"aws_lb_target_group","name":"cockroachdb_service_tg","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"health_check":[{"path":{"constant_value":"/health?ready=1"},"port":{"constant_value":8080},"protocol":{"constant_value":"HTTP"}}],"name":{"references":["terraform.workspace"]},"port":{"constant_value":26257},"protocol":{"constant_value":"TCP"},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":0},{"address":"aws_lb_target_group_attachment.cockroachdb_service_tg_attachment","mode":"managed","type":"aws_lb_target_group_attachment","name":"cockroachdb_service_tg_attachment","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"port":{"constant_value":26257},"target_group_arn":{"references":["aws_lb_target_group.cockroachdb_service_tg"]},"target_id":{"references":["aws_instance.cockroachdb-node","count.index"]}},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"aws_nat_gateway.test-ngw","mode":"managed","type":"aws_nat_gateway","name":"test-ngw","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"allocation_id":{"references":["aws_eip.test-nat"]},"subnet_id":{"references":["aws_subnet.test_public_subnet"]},"tags":{"constant_value":{"Name":"test-ngw"}}},"schema_version":0},{"address":"aws_route_table.test_igw_rt","mode":"managed","type":"aws_route_table","name":"test_igw_rt","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"tags":{"constant_value":{"Name":"est_igw_rt"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":0},{"address":"aws_route_table.test_nat_rt_1","mode":"managed","type":"aws_route_table","name":"test_nat_rt_1","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"tags":{"constant_value":{"Name":"test_nat_rt_1"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":0},{"address":"aws_route_table.test_nat_rt_2","mode":"managed","type":"aws_route_table","name":"test_nat_rt_2","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"tags":{"constant_value":{"Name":"test_nat_rt_2"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":0},{"address":"aws_route_table_association.test_private_1","mode":"managed","type":"aws_route_table_association","name":"test_private_1","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"route_table_id":{"references":["aws_route_table.test_nat_rt_1"]},"subnet_id":{"references":["aws_subnet.test_private_subnet_1"]}},"schema_version":0},{"address":"aws_route_table_association.test_private_2","mode":"managed","type":"aws_route_table_association","name":"test_private_2","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"route_table_id":{"references":["aws_route_table.test_nat_rt_2"]},"subnet_id":{"references":["aws_subnet.test_private_subnet_2"]}},"schema_version":0},{"address":"aws_route_table_association.test_public","mode":"managed","type":"aws_route_table_association","name":"test_public","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"route_table_id":{"references":["aws_route_table.test_igw_rt"]},"subnet_id":{"references":["aws_subnet.test_public_subnet"]}},"schema_version":0},{"address":"aws_security_group.bastion_sg","mode":"managed","type":"aws_security_group","name":"bastion_sg","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"name":{"references":["terraform.workspace"]},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":1},{"address":"aws_security_group.cockroachdb-allowed","mode":"managed","type":"aws_security_group","name":"cockroachdb-allowed","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"name":{"references":["terraform.workspace"]},"tags":{"constant_value":{"Name":"cockroachdb-allowed"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":1},{"address":"aws_subnet.test_private_subnet_1","mode":"managed","type":"aws_subnet","name":"test_private_subnet_1","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.private_subnet_map_1"]},"tags":{"constant_value":{"Name":"test_private_subnet_1"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":1},{"address":"aws_subnet.test_private_subnet_2","mode":"managed","type":"aws_subnet","name":"test_private_subnet_2","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.private_subnet_map_2"]},"tags":{"constant_value":{"Name":"test_private_subnet_2"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":1},{"address":"aws_subnet.test_public_subnet","mode":"managed","type":"aws_subnet","name":"test_public_subnet","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"references":["var.public_subnet_map"]},"tags":{"constant_value":{"Name":"test_public_subnet"}},"vpc_id":{"references":["aws_vpc.test-vpc"]}},"schema_version":1,"depends_on":["aws_internet_gateway.test-igw"]},{"address":"aws_vpc.test-vpc","mode":"managed","type":"aws_vpc","name":"test-vpc","provider_config_key":"create_cockroachdb_environment:aws","expressions":{"cidr_block":{"references":["var.vpc_cidr_map"]},"enable_classiclink":{"constant_value":"false"},"enable_dns_hostnames":{"constant_value":"true"},"enable_dns_support":{"constant_value":"true"},"instance_tenancy":{"constant_value":"default"},"tags":{"constant_value":{"Name":"test-vpc"}}},"schema_version":1},{"address":"null_resource.bastion-runner","mode":"managed","type":"null_resource","name":"bastion-runner","provider_config_key":"create_cockroachdb_environment:null","provisioners":[{"type":"file","expressions":{"destination":{"constant_value":"/home/ubuntu/setup-cockroach.sh"},"source":{"constant_value":"../scripts/setup-cockroach.sh"}}},{"type":"remote-exec","expressions":{"inline":{"references":["aws_instance.cockroachdb-node[0]"]}}}],"schema_version":0,"depends_on":["null_resource.cockroach-runner"]},{"address":"null_resource.cockroach-runner","mode":"managed","type":"null_resource","name":"cockroach-runner","provider_config_key":"create_cockroachdb_environment:null","provisioners":[{"type":"file","expressions":{"destination":{"constant_value":"/home/ubuntu/setup-cockroach.sh"},"source":{"constant_value":"../scripts/setup-cockroach.sh"}}},{"type":"file","expressions":{"destination":{"constant_value":"/home/ubuntu/cockroach"},"source":{"references":["var.cockroach_binary"]}}},{"type":"remote-exec","expressions":{"inline":{"references":["aws_instance.cockroachdb-node","count.index","aws_instance.cockroachdb-node"]}}}],"schema_version":0,"count_expression":{"references":["var.instance_count"]},"depends_on":["aws_eip.bastion_eip"]}],"variables":{"ami":{},"cockroach_binary":{"default":""},"cockroach_sha":{"default":""},"ec2_user":{},"instance_count":{},"instance_type":{},"private_key_path":{},"private_subnet_map_1":{},"private_subnet_map_2":{},"public_key_path":{},"public_subnet_map":{},"region":{},"vpc_cidr_map":{}}}}},"variables":{"ami":{"default":{"ap-south-1":"ami-059d1007dcf297b22","default":"ami-0dd76f917833aac4b","us-east-1":"ami-0dd76f917833aac4b","us-east-2":"ami-02de934ca4f3289e0"}},"ec2_user":{"default":"ubuntu"},"environment_to_profile_map":{"default":{"default":"dev","dev":"dev","prod":"aws-prod-profile","qa":"aws-qa-profile","staging":"aws-staging-profile"},"description":"Map aws cli profile based on the workspace"},"environment_to_region_map":{"default":{"default":"us-east-1","dev":"us-east-1","prod":"ap-south-1","qa":"us-east-2","staging":"us-west-1"},"description":"Map region for env"},"instance_count":{"default":{"default":"2","dev":"2","prod":"6","qa":"3","staging":"4"},"description":"Map instance count based on the workspace"},"instance_type":{"default":{"default":"t3.large","dev":"t3.large","prod":"c5d.4xlarge","qa":"t3.large","staging":"c5d.4xlarge"},"description":"Map instance type based on the workspace"},"private_key_path":{"default":"/Users/abhishek.sh/personal-proj/cockroachdb-on-aws/scripts/ssh/cockroachdb-node"},"private_subnet_map_1":{"default":{"default":"10.18.8.0/22","dev":"10.18.8.0/22","prod":"10.20.8.0/22","staging":"10.19.8.0/22"}},"private_subnet_map_2":{"default":{"default":"10.18.12.0/22","dev":"10.18.12.0/22","prod":"10.20.12.0/22","staging":"10.19.12.0/22"}},"public_key_path":{"default":"/Users/abhishek.sh/personal-proj/cockroachdb-on-aws/scripts/ssh/cockroachdb-node.pub"},"public_subnet_map":{"default":{"default":"10.18.0.0/22","dev":"10.18.0.0/22","prod":"10.20.0.0/22","staging":"10.19.0.0/22"}},"vpc_cidr_map":{"default":{"default":"10.18.0.0/16","dev":"10.18.0.0/16","prod":"10.20.0.0/16","staging":"10.19.0.0/16"}},"workspace_to_environment_map":{"default":{"default":"dev","dev":"dev","prod":"prod","qa":"qa","staging":"staging"},"description":"Map environments name for workspace"}}}}}
